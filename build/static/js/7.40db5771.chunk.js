(this.webpackJsonppizza_project=this.webpackJsonppizza_project||[]).push([[7],{174:function(e,t,n){"use strict";t.a={getLoading:function(e){return e.products.loading},getError:function(e){return e.products.errorReducer},getProducts:function(e){return e.products.items},getFileLink:function(e){return e.products.fileLink},getIngredients:function(e){return e.products.ingredients},createNewIngredient:function(e){return e.products.newIngredient},addIngredient:function(e){return e.products.ingredient}}},175:function(e,t,n){"use strict";var a=n(4),r=n(176);t.a={fetchProducts:function(){return function(e){e(a.a.productsRequest()),Object(r.g)().then((function(t){var n=t.data;return e(a.a.productsSuccess(n.products))})).catch((function(t){return e(a.a.productsError(t))}))}},fetchProductsByCategory:function(e){return function(t){t(a.a.byCategoryRequest()),Object(r.j)(e).then((function(e){var n=e.data;return t(a.a.byCategorySuccess(n.products))})).catch((function(e){return t(a.a.byCategoryError(e))}))}},fetchProductById:function(e){return function(t){t(a.a.byIdRequest()),Object(r.i)(e).then((function(e){var n=e.data;return t(a.a.byIdSuccess(n.product))})).catch((function(e){return t(a.a.byIdError(e))}))}},sendFile:function(e){return function(t){t(a.a.sendFileRequest()),Object(r.k)(e).then((function(e){var n=e.data;return t(a.a.sendFileSuccess(n.image.file))})).catch((function(e){return t(a.a.sendFileError(e))}))}},sendProduct:function(e){return function(t){t(a.a.sendProductRequest()),Object(r.l)(e).then((function(e){var n=e.data;t(a.a.sendProductSuccess(n.product)),t(a.a.clearFile())})).catch((function(e){return t(a.a.sendProductError(e))}))}},getIngredients:function(){return function(e){e(a.a.getAllIngredientsRequest()),Object(r.f)().then((function(t){var n=t.data;return e(a.a.getAllIngredientsSuccess(n.ingredients))})).catch((function(t){return e(a.a.getAllIngredientsError(t))}))}},updateProduct:function(e,t){return function(n){n(a.a.updateProductRequest()),Object(r.p)(e,t).then((function(e){var t=e.data;return n(a.a.updateProductSuccess(t))})).catch((function(e){return n(a.a.updateProductError(e))}))}},deleteProduct:function(e){return function(t){t(a.a.deleteProductRequest()),Object(r.c)(e).then((function(e){var n=e.data;return t(a.a.deleteProductSuccess(n))})).catch((function(e){return t(a.a.deleteProductError(e))}))}},createNewIngredient:function(e){return function(t){t(a.a.createNewIngredientsRequest()),Object(r.a)(e).then((function(){return t(a.a.createNewIngredientsSuccess())})).catch((function(e){return t(a.a.createNewIngredientsError(e))}))}}}},176:function(e,t,n){"use strict";n.d(t,"e",(function(){return F})),n.d(t,"f",(function(){return _})),n.d(t,"a",(function(){return p})),n.d(t,"l",(function(){return g})),n.d(t,"k",(function(){return E})),n.d(t,"g",(function(){return m})),n.d(t,"j",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"p",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"n",(function(){return v})),n.d(t,"m",(function(){return N})),n.d(t,"o",(function(){return L})),n.d(t,"b",(function(){return j})),n.d(t,"h",(function(){return O}));var a=n(46),r=n.n(a),i=n(53),c=n(25),d=n.n(c),o=d.a.CancelToken.source(),u="https://evening-caverns-34846.herokuapp.com",m=function(){return d.a.get("/products")},s=function(e){return d.a.get('/products/?category="'.concat(e,'"'),{cancelToken:o.token})},l=function(e){return d.a.get("/products/".concat(e))},_=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.get("".concat(u,"/ingredients")));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(i.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.a.post("".concat(u,"/ingredients"),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){return d.a.post("".concat(u,"/products"),e)},f=function(e,t){return d.a.put("/products/".concat(e),t)},b=function(e){return d.a.delete("/products/".concat(e))},E=function(){var e=Object(i.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.abrupt("return",d.a.post("".concat(u,"/images"),n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){return d.a.get("/developers")},h=function(){return d.a.get("/promo")},v=function(e){return d.a.post("/images",e)},N=function(e){return d.a.post("/promo",e)},L=function(e,t){return d.a.put("/promo/".concat(e),t)},j=function(e){return d.a.delete("/promo/".concat(e))},O=function(e){return d.a.get("/promo/".concat(e))}},180:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(11),c=n(12),d=n(174),o=n(171),u=n(18),m=n(185),s=n.n(m);t.a=function(e){var t=e.massage,n=Object(i.d)(d.a.getError);n&&(t=n);var a="/admin/create-product"===Object(u.h)().pathname;return r.a.createElement("div",{className:s.a.confirmation,"data-confirm":"continue"},r.a.createElement("div",{className:s.a.confirmation__form},r.a.createElement("p",{className:s.a.confirmation__formText},t),!a&&r.a.createElement(c.b,{to:"/admin/update-product",className:s.a.confirmation__formBtnLink},r.a.createElement("button",{type:"button",className:s.a.confirmation__formBtn},r.a.createElement(o.a,{id:"update.return"}))),"deleted product"===t.props.id||r.a.createElement("button",{type:"button",className:s.a.confirmation__formBtn,name:"continue"},r.a.createElement(o.a,{id:"continue editing"}))))}},185:function(e,t,n){e.exports={confirmation:"confirmationWindow_confirmation__3AN5I",confirmation__form:"confirmationWindow_confirmation__form__1Kt2s",confirmation__formText:"confirmationWindow_confirmation__formText__2xTMf",confirmation__formBtnLink:"confirmationWindow_confirmation__formBtnLink__3g0sE",confirmation__formBtn:"confirmationWindow_confirmation__formBtn__HyuL7"}},186:function(e,t,n){"use strict";var a=n(44),r=n(0),i=n.n(r),c=n(187),d=n.n(c),o=n(11),u=n(171),m=n(175),s=n(180);t.a=function(){var e=Object(o.c)(),t=Object(r.useState)(!1),n=Object(a.a)(t,2),c=n[0],l=n[1],_=Object(r.useState)(""),p=Object(a.a)(_,2),g=p[0],f=p[1],b=Object(r.useState)(""),E=Object(a.a)(b,2),F=E[0],h=E[1],v=Object(r.useState)(""),N=Object(a.a)(v,2),L=N[0],j=N[1],O=Object(r.useState)(""),I=Object(a.a)(O,2),C=I[0],S=I[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{className:d.a.editForm__newIngredient},i.a.createElement("h4",{className:d.a.editCard__title},i.a.createElement(u.a,{id:"update.createNewIngredient"})),i.a.createElement("div",{className:d.a.editCard__titleName},i.a.createElement("p",{className:d.a.editCard__titleLang},"ru"),i.a.createElement("input",{type:"text",value:F,onChange:function(e){return h(e.target.value)},className:d.a.editForm__inputLang,minLength:"3",maxLength:"30",required:!0}),i.a.createElement("p",{className:d.a.editCard__titleLang},"en"),i.a.createElement("input",{type:"text",value:C,onChange:function(e){return S(e.target.value)},className:d.a.editForm__inputLang,minLength:"3",maxLength:"30",required:!0}),i.a.createElement("p",{className:d.a.editCard__titleLang},"ukr"),i.a.createElement("input",{type:"text",value:L,onChange:function(e){return j(e.target.value)},className:d.a.editForm__inputLang,minLength:"3",maxLength:"30",required:!0})),i.a.createElement("button",{type:"button",onClick:function(){if(C.length>=3&&F.length>=3&&L.length>=3){var t={name:{ru:F,en:C,ukr:L}};e(m.a.createNewIngredient(t)),f(i.a.createElement(u.a,{id:"update.ingredientAdded"}))}else f(i.a.createElement(u.a,{id:"update.errorValidationName"}));l(!0)},className:d.a.editForm__addNewIngredientBtn},i.a.createElement(u.a,{id:"update.addNewIngredient"}))),i.a.createElement("div",{onClick:function(t){l(!1),t.target.name=e(m.a.getIngredients())}},c&&g&&i.a.createElement(s.a,{massage:g})))}},187:function(e,t,n){e.exports={editForm__newIngredient:"addNewIngredient_editForm__newIngredient__2yuFr",editCard__title:"addNewIngredient_editCard__title__14-Xb",editForm__inputNewIngredient:"addNewIngredient_editForm__inputNewIngredient__Cmx_u",editForm__inputLang:"addNewIngredient_editForm__inputLang__1aNDC",editForm__addNewIngredientBtn:"addNewIngredient_editForm__addNewIngredientBtn__3MUlw",editCard__titleName:"addNewIngredient_editCard__titleName__TAhik"}},188:function(e,t,n){"use strict";var a=n(16),r=n(40),i=n(44),c=n(0),d=n.n(c),o=n(11),u=n(171),m=n(79),s=n(174),l=n(4),_=n(189),p=n.n(_);t.a=function(e){var t=e.productForEdit,n=void 0===t?{}:t,_=Object(o.c)(),g=Object(o.d)((function(e){return e.local.lang})),f=Object(o.d)(s.a.getIngredients),b=f.map((function(e,t){return{label:e.name[g],value:t}})),E=Object(c.useState)(""),F=Object(i.a)(E,2),h=F[0],v=F[1],N=Object(c.useState)(n.ingredients||[]),L=Object(i.a)(N,2),j=L[0],O=L[1];Object(c.useEffect)((function(){_((function(e){return e(l.a.addIngredient(j))}))}),[j]),Object(c.useEffect)((function(){v(b[0])}),[f]),Object(c.useEffect)((function(){v(b[h.value])}),[g]);var I=function(e){var t=j.findIndex((function(t){return t._id===e.currentTarget.dataset.id})),n=Object(r.a)(j);n.splice(t,1),O(n)};return d.a.createElement(d.a.Fragment,null,d.a.createElement("h4",{className:p.a.editCard__title},d.a.createElement(u.a,{id:"update.composition"})),d.a.createElement("span",{className:p.a.discriptionTitle},d.a.createElement(u.a,{id:"update.compositionDiscription"})),d.a.createElement("ul",{className:p.a.editForm__ingredients},j.map((function(e,t){return d.a.createElement("li",{key:e._id,className:p.a.editForm__ingredient},d.a.createElement("span",{className:p.a.editForm__ingredientName},e.name[g]),d.a.createElement("button",{type:"button",onClick:I,"data-id":e._id,className:p.a.editForm__ingredientBtnDel},d.a.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",className:p.a.editForm__ingredientBtnDelImage},d.a.createElement("path",{d:"M11.25 1.8075L10.1925 0.75L6 4.9425L1.8075 0.75L0.75 1.8075L4.9425 6L0.75 10.1925L1.8075 11.25L6 7.0575L10.1925 11.25L11.25 10.1925L7.0575 6L11.25 1.8075Z",fill:"#ffff"}))))}))),d.a.createElement("label",{className:p.a.editForm__ingredientsSelect},d.a.createElement(m.a,{options:b,value:h,onChange:function(e){return v(e)},className:p.a.editForm__ingredientsList,theme:function(e){return Object(a.a)(Object(a.a)({},e),{},{borderRadius:0,colors:Object(a.a)(Object(a.a)({},e.colors),{},{primary25:"white",primary:"#ff6c00"})})}}),d.a.createElement("button",{type:"button",onClick:function(){j.some((function(e){return f[h.value]._id===e._id}))||O((function(e){return[].concat(Object(r.a)(e),[f[h.value]])}))},className:p.a.editForm__addIngredientBtn},d.a.createElement(u.a,{id:"update.addToComposition"}))))}},189:function(e,t,n){e.exports={variables:"'../../../stylesheet/vars.css'",lightColor:"#FFF",accentColor:"#FF6C00",primaryColor:"#272727",primaryTextFontSize:"0.875 rem",editCard__title:"ingredientSelect_editCard__title__3a7-F",discriptionTitle:"ingredientSelect_discriptionTitle__1Zlc_",editForm__ingredientsSelect:"ingredientSelect_editForm__ingredientsSelect__2rx3o",editForm__ingredients:"ingredientSelect_editForm__ingredients__2uAki",editForm__ingredient:"ingredientSelect_editForm__ingredient__2OJYt",editForm__ingredientName:"ingredientSelect_editForm__ingredientName__1sKcv",editForm__ingredientsList:"ingredientSelect_editForm__ingredientsList__1roaP",editForm__addIngredientBtn:"ingredientSelect_editForm__addIngredientBtn__1ySxs",editForm__ingredientBtnDel:"ingredientSelect_editForm__ingredientBtnDel__14iE1",editForm__ingredientBtnDelImage:"ingredientSelect_editForm__ingredientBtnDelImage__384I4"}},190:function(e,t,n){e.exports={container:"adminUpdateListItemEdit_container__1oiZ8",editCard:"adminUpdateListItemEdit_editCard__3URX9",editCard__image:"adminUpdateListItemEdit_editCard__image__zWblm",editForm:"adminUpdateListItemEdit_editForm__1LcAs",editCard__title:"adminUpdateListItemEdit_editCard__title__25iEy",editCard__titleName:"adminUpdateListItemEdit_editCard__titleName__F7BZd",editCard__titleLang:"adminUpdateListItemEdit_editCard__titleLang__1z1FY",editForm__inputLang:"adminUpdateListItemEdit_editForm__inputLang__1iQ3Q",editCard__photoLabel:"adminUpdateListItemEdit_editCard__photoLabel__2CUSJ",editForm__photo:"adminUpdateListItemEdit_editForm__photo___3F08",editForm__photoBtn:"adminUpdateListItemEdit_editForm__photoBtn__nEePQ",editForm__inputCategory:"adminUpdateListItemEdit_editForm__inputCategory__1JmHY",editForm__price:"adminUpdateListItemEdit_editForm__price__VzkMX",editForm__priceInput:"adminUpdateListItemEdit_editForm__priceInput__1TM5K",editForm__inputSinglePrice:"adminUpdateListItemEdit_editForm__inputSinglePrice__3Q61q",editForm__priceTitle:"adminUpdateListItemEdit_editForm__priceTitle__13Yi0",editForm__inputDescription:"adminUpdateListItemEdit_editForm__inputDescription__2zXrU",editForm__btnSubmit:"adminUpdateListItemEdit_editForm__btnSubmit__1Qvhn"}},250:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));var a=n(16),r=n(44),i=n(0),c=n.n(i),d=n(11),o=n(171),u=n(79),m=n(18),s=n(180),l=n(186),_=n(188),p=n(174),g=n(175),f=n(47),b=n(190),E=n.n(b),F=n(4),h=n(45),v=function(){var e=Object(d.c)(),t=Object(m.h)(),n=null;n=t.state?t.state.product:JSON.parse(sessionStorage.getItem("editedItem"));var b=Object(d.d)((function(e){return e.local.lang})),v=Object(d.d)(p.a.addIngredient),N=Object(d.d)(p.a.getLoading),L=Object(d.d)(p.a.getFileLink),j=Object(i.useState)(""),O=Object(r.a)(j,2),I=O[0],C=O[1],S=Object(i.useState)(n.name.ru),y=Object(r.a)(S,2),w=y[0],k=y[1],x=Object(i.useState)(n.name.en),z=Object(r.a)(x,2),B=z[0],P=z[1],U=Object(i.useState)(n.name.ukr),q=Object(r.a)(U,2),T=q[0],D=q[1],R=Object(i.useState)({id:0,value:n.subcategory,label:h.a[b]["pizza.".concat(n.subcategory)]}),M=Object(r.a)(R,2),A=M[0],X=M[1],J=Object(i.useState)(n.price.price),W=Object(r.a)(J,2),Q=W[0],Y=W[1],Z=Object(i.useState)(""),K=Object(r.a)(Z,2),H=K[0],V=K[1],G=Object(i.useState)(n.price.M),$=Object(r.a)(G,2),ee=$[0],te=$[1],ne=Object(i.useState)(n.price.L),ae=Object(r.a)(ne,2),re=ae[0],ie=ae[1],ce=Object(i.useState)(n.price.XL),de=Object(r.a)(ce,2),oe=de[0],ue=de[1],me=Object(i.useState)(n.description),se=Object(r.a)(me,2),le=se[0],_e=se[1],pe=Object(i.useState)(!1),ge=Object(r.a)(pe,2),fe=ge[0],be=ge[1],Ee=[{id:0,label:h.a[b]["pizza.classic"],value:"classic"},{id:1,label:h.a[b]["pizza.special"],value:"branded"},{id:2,label:h.a[b]["pizza.premium"],value:"premium"}];Object(i.useEffect)((function(){"pizza"===n.categories?(be(!1),V({M:ee,L:re,XL:oe})):V({price:Q})}),[ee,re,oe,Q]),Object(i.useEffect)((function(){e(g.a.getIngredients())}),[]),Object(i.useEffect)((function(){e(e(F.a.imagesInit(n.images)))}),[]),Object(i.useEffect)((function(){X(Ee[A.id])}),[b]);var Fe=function(){var e={ru:w,ukr:T,en:B};H||("pizza"===n.categories?V({M:"",L:"",XL:""}):V({price:""}));var t={price:H,name:e,ingredients:v,images:L};return t.name={ru:w,ukr:T,en:B},t.categories=n.categories,t.subcategory=A.value,"pizza"!==n.categories&&(t.description=le),t};window.addEventListener("unload",(function(){var e=Object(a.a)({_id:n._id},Fe());sessionStorage.setItem("editedItem",JSON.stringify(e))}));return c.a.createElement("div",{className:E.a.container},N&&c.a.createElement(f.a,null),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:E.a.editCard},c.a.createElement("img",{src:L,alt:n.closeUpImages,className:E.a.editCard__image}),c.a.createElement("form",{id:"editForm",onSubmit:function(t){t.preventDefault(),be(!1);var a=Fe();!function(t,n){e(g.a.updateProduct(t,n))}(n._id,a),C(c.a.createElement(o.a,{id:"product updated"}))},className:E.a.editForm},c.a.createElement("h4",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"photo"})),c.a.createElement("label",{className:E.a.editCard__photoLabel},c.a.createElement("input",{type:"file",accept:"image/*",onChange:function(t){var n;t.preventDefault(),t.target.files[0]&&(n=t.target.files[0],e(g.a.sendFile(n))),window.history.pushState({},"","/")},className:E.a.editForm__photo}),c.a.createElement("p",{className:E.a.editForm__photoBtn},c.a.createElement(o.a,{id:"upload"}))),c.a.createElement("h4",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"product.category"})),c.a.createElement("p",null,c.a.createElement(o.a,{id:n.categories})),"pizza"===n.categories&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"product.subcategory"})),c.a.createElement(u.a,{options:Ee,value:A,onChange:function(e){return X(e)},theme:function(e){return Object(a.a)(Object(a.a)({},e),{},{borderRadius:0,colors:Object(a.a)(Object(a.a)({},e.colors),{},{primary25:"white",primary:"#ff6c00"})})}})),c.a.createElement("h4",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"product.name"})),c.a.createElement("div",{className:E.a.editCard__titleName},c.a.createElement("p",{className:E.a.editCard__titleLang},c.a.createElement(o.a,{id:"rus name"})),c.a.createElement("input",{type:"text",value:w,onChange:function(e){return k(e.target.value)},className:E.a.editForm__inputLang,minLength:"3",maxLength:"30",required:!0}),c.a.createElement("p",{className:E.a.editCard__titleLang},c.a.createElement(o.a,{id:"eng name"})),c.a.createElement("input",{type:"text",value:B,onChange:function(e){return P(e.target.value)},className:E.a.editForm__inputLang,minLength:"3",maxLength:"30",required:!0}),c.a.createElement("p",{className:E.a.editCard__titleLang},c.a.createElement(o.a,{id:"ukr name"})),c.a.createElement("input",{type:"text",value:T,onChange:function(e){return D(e.target.value)},className:E.a.editForm__inputLang,minLength:"3",maxLength:"30",required:!0})),c.a.createElement("h4",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"product.price"})),"pizza"===n.categories?c.a.createElement("div",{className:E.a.editForm__price},c.a.createElement("h4",{className:E.a.editForm__priceTitle},"M"),c.a.createElement("input",{type:"number",value:ee,onChange:function(e){return te(e.target.value)},className:E.a.editForm__priceInput,min:"10",max:"999",step:"1",required:!0}),c.a.createElement("h4",{className:E.a.editForm__priceTitle},"L"),c.a.createElement("input",{type:"number",value:re,onChange:function(e){return ie(e.target.value)},className:E.a.editForm__priceInput,min:"10",max:"999",step:"1",required:!0}),c.a.createElement("h4",{className:E.a.editForm__priceTitle},"XL"),c.a.createElement("input",{type:"number",value:oe,onChange:function(e){return ue(e.target.value)},className:E.a.editForm__priceInput,min:"10",max:"999",step:"1",required:!0})):c.a.createElement(c.a.Fragment,null,c.a.createElement("input",{type:"number",value:Q,onChange:function(e){return Y(e.target.value)},className:E.a.editForm__inputSinglePrice,min:"10",max:"999",step:"1",required:!0}),c.a.createElement("p",{className:E.a.editCard__title},c.a.createElement(o.a,{id:"volume weight"})),c.a.createElement("input",{type:"number",value:le,onChange:function(e){return _e(e.target.value)},className:E.a.editForm__inputDescription,min:"0.3",max:"999",step:"0.01",required:!0})),"pizza"===n.categories&&c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,{productForEdit:n}),c.a.createElement("label",{className:"".concat(E.a.editForm)},c.a.createElement("h4",{className:E.a.editForm__photoBtn},c.a.createElement(o.a,{id:"update.createNewIngredient"})),c.a.createElement("input",{type:"button",onClick:function(){return be(!fe)},className:E.a.editForm__photo})),fe&&c.a.createElement(l.a,null))),c.a.createElement("button",{disabled:N,form:"editForm",type:"submit",className:E.a.editForm__btnSubmit},c.a.createElement(o.a,{id:"update.saveChanges"})),c.a.createElement("button",{disabled:N,form:"editForm",type:"submit",className:E.a.editForm__btnSubmit,onClick:function(t){t.preventDefault(),be(!1),e(g.a.deleteProduct(n._id)),sessionStorage.removeItem("editedItem"),window.history.pushState({},"","/"),C(c.a.createElement(o.a,{id:"deleted product"}))}},c.a.createElement(o.a,{id:"delete product"}))),c.a.createElement("div",{onClick:function(e){be(!1),"deleted product"!==I.props.id&&"continue"===e.target.dataset.confirm&&C(""),"continue"===e.target.name&&C("")}},!N&&I&&c.a.createElement(s.a,{massage:I}))))}}}]);
//# sourceMappingURL=7.40db5771.chunk.js.map