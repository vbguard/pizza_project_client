{"version":3,"sources":["pages/AuthPage/index.js"],"names":["AuthPage","dispatch","useDispatch","history","useHistory","location","useLocation","isAuthenticated","useSelector","authSelectors","useEffect","replace","params","URLSearchParams","search","username","get","token","email","id","user","authOperations","logInSocial"],"mappings":"iHAAA,2DAoCeA,UA9BE,WACf,IAAMC,EAAWC,cACXC,EAAUC,cACVC,EAAWC,cACXC,EAAkBC,YAAYC,IAAcF,iBAuBlD,OAtBAG,qBAAU,WACR,GAAIH,EACF,OAAOJ,EAAQQ,QAAQ,KAEzB,IAAMC,EAAS,IAAIC,gBAAgBR,EAASS,QACtCC,EAAWH,EAAOI,IAAI,QACtBC,EAAQL,EAAOI,IAAI,SACnBE,EAAQN,EAAOI,IAAI,SACnBG,EAAKP,EAAOI,IAAI,MACtB,IAAKD,IAAaE,IAAUE,EAC1B,OAAOhB,EAAQQ,QAAQ,KAEzB,IAAMS,EAAO,CACXL,WACAG,QACAD,QACAE,MAEFlB,EAASoB,IAAeC,YAAYF,IACpCjB,EAAQQ,QAAQ,QAGX,kBAAC,IAAD","file":"static/js/21.feae8843.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { authSelectors, authOperations } from \"../../redux/auth\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport Spinner from \"../../components/Spinner\";\r\n\r\nconst AuthPage = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n  const isAuthenticated = useSelector(authSelectors.isAuthenticated);\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      return history.replace(\"/\");\r\n    }\r\n    const params = new URLSearchParams(location.search);\r\n    const username = params.get(\"name\");\r\n    const token = params.get(\"token\");\r\n    const email = params.get(\"email\");\r\n    const id = params.get(\"id\");\r\n    if (!username || !token || !id) {\r\n      return history.replace(\"/\");\r\n    }\r\n    const user = {\r\n      username,\r\n      email,\r\n      token,\r\n      id,\r\n    };\r\n    dispatch(authOperations.logInSocial(user));\r\n    history.replace(\"/\");\r\n  });\r\n\r\n  return <Spinner />;\r\n};\r\n\r\nexport default AuthPage;\r\n"],"sourceRoot":""}